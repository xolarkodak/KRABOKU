# KRABOKU

### Онлайн кінотеатр створенний як проектна робота для курсу з Node JS. 
### Автори: ІО-11 Куделя Олександр, ІО-11 Бондаренко Владислав, ІО-11 Кравець Мар'ян
### **Результат роботи: <link>https://kraboku-client.vercel.app/</link>**

# Проект на Node.js - Серверна частина

## Використані технології
- ***Node.js*** : JavaScript runtime для виконання серверного коду.
- ***Express.js*** : Фреймворк для обробки HTTP-запитів та визначення маршрутів.
- ***MongoDB*** : База даних для зберігання інформації про фільми, новини, категорії та теги.
- ***Mongoose*** : ОDM (Object Data Modeling) для MongoDB та Node.js.
- ***Firebase Storage*** : Сховище для зберігання та обробки файлів (зображення).

## Структура проекту
- ***config*** : Конфігураційні файли, зокрема, конфігурація для з'єднання з MongoDB (db.js) та Firebase (firebaseStorage.js).
- ***Controllers*** : Контролери, які обробляють логіку кожного ендпоінту (керують функціоналом).
- ***middlewares*** : Проміжники, такі як middleware для обробки помилок (errorMiddleware) та middleware для аутентифікації та авторизації користувачів (Auth).
- ***Models*** : Опис схем даних для MongoDB (наприклад, схеми для фільмів, новин, категорій, тегів та користувачів).
- ***Routes*** : Маршрутизатори, які визначають маршрути та вказують, які контролери слід викликати для обробки запитів.
- ***config/firebaseStorage.js*** : Налаштування для підключення до Firebase Storage.
- ***UploadFile.js*** : Роутер для завантаження файлів (використовує multer для обробки файлів).

## Як зпустити проект
### Запуск серверної частини
1. Завантажте проект: `git clone https://github.com/xolarkodak/KRABOKU`
2. Перейдіть в каталог серверу: `cd server`
3. Встановіть залежності: `npm install`
4. Запустіть сервер: `npm run dev`
### Запуск клієнської частини
1. Завантажте проект: `git clone https://github.com/xolarkodak/KRABOKU`
2. Перейдіть в каталог клієнту: `cd client`
3. Встановіть залежності: `npm install`
4. Запустіть клієнт: `npm run start`

Сервер буде доступний за локальною адресою `http://localhost:5000`.

## API Ендпоінти
### Користувачі
- `POST /api/users` : Реєстрація нового користувача.
- `POST /api/users/login` : Вхід користувача.
- `PUT /api/users` : Оновлення профілю користувача (потрібна автентифікація).
- `DELETE /api/users` : Видалення профілю користувача (потрібна автентифікація).
- `PUT /api/users/password` : Зміна паролю користувача (потрібна автентифікація).
- `GET /api/users/favorites` : Отримати улюблені фільми користувача (потрібна автентифікація).
- `POST /api/users/favorites` : Додати фільм до улюблених (потрібна автентифікація).
- `DELETE /api/users/favorites` : Видалити фільм із улюблених (потрібна автентифікація).
- `GET /api/users` : Отримання списку користивачів (потрібна автентифікація та права адміністратора).
- `DELETE /api/users/:id` : Видалення користувача за його ідентифікатором (потрібна автентифікація та права адміністратора).


### Фільми
- `GET /api/movies` : Отримати список фільмів.
- `GET /api/movies/:id` : Отримати інформацію про конкретний фільм за його ідентифікатором.
- `GET /api/movies/rated/top` : Отримати список найвище оцінених фільмів.
- `GET /api/movies/random/all` : Отримати випадкові фільми.
- `POST /api/movies/:id/reviews` : Додати відгук до фільму (потрібна автентифікація).
- `PUT /api/movies/:id` : Оновити інформацію про фільм за його ідентифікатором (потрібна автентифікація та права адміністратора).
- `DELETE /api/movies/:id` : Видалити фільм за його ідентифікатором (потрібна автентифікація та права адміністратора).
- `DELETE /api/movies` : Видалити всі фільми (потрібна автентифікація та права адміністратора).
- `POST /api/movies` : Створити новий фільм (потрібна автентифікація та права адміністратора).

### Новини
- `GET /api/news` : Отримати список новин.
- `GET /api/news/:id` : Отримати інформацію про конкретну новину за ідентифікатором.
- `POST /api/news/:id/reviews` : Додати відгук до новини (потрібна автентифікація).
- `POST /api/news` : Створити нову новину (потрібна автентифікація та права адміністратора).
- `PUT /api/news/:id` : Оновити інформацію про новину за ідентифікатором(потрібна автентифікація та права адміністратора).
- `DELETE /api/news/:id` : Видалити новину за ідентифікатором (потрібна автентифікація та права адміністратора).
- `DELETE /api/news` : Видалити всі новини (потрібна автентифікація та права адміністратора).

### Категорії
- `GET /api/categories` : Отримати список категорій.
- `POST /api/categories` : Створити нову категорію (потрібна автентифікація та права адміністратора).
- `PUT /api/categories/:id` : Оновити інформацію про категорію за ідентифікатором (потрібна автентифікація та права адміністратора).
- `DELETE /api/categories/:id` : Видалити категорію за ідентифікатором (потрібна автентифікація та права адміністратора).

### Теги
- `GET /api/tags` : Отримати список тегів.
- `POST /api/tags` : Створити новий тег (потрібна автентифікація та права адміністратора).
- `PUT /api/tags/:id` : Оновити інформацію про тег за ідентифікатором (потрібна автентифікація та права адміністратора).
- `DELETE /api/tags/:id` : Видалити тег за ідентифікатором (потрібна автентифікація та права адміністратора).

### Авторизація та Аутентифікація
- Для доступу до багатьох ендпоінтів потрібна автентифікація, яку можна отримати шляхом реєстрації та входу в систему.
- Кожен користувач може мати роль "користувача" або "адміністратора". Деякі ендпоінти доступні тільки адміністраторам.
- Кожен пароль шифрується через токени для забезпечення безпеки користувачів. При реєстрації користувача або при зміні паролю, пароль перетворюється в токен за допомогою функції хешування. Токен використовується для збереження та порівняння паролів в базі даних.

Для реалізації шифрування паролів через токени використовується бібліотека bcrypt. 

## Реалізовані завдання
- [x] Реалізувати реєстрацію та вхід користувача.
- [x] Реалізувати шифрування паролів через токени
- [x] Дозволити користувачам додавати фільми до списку улюблених.
- [x] Забезпечити автентифікацію для ендпоінтів, які потребують доступ до особистих даних користувача.
- [x] Реалізувати можливість додавання відгуків до фільмів та новин.
- [x] Забезпечити можливість створення, редагування та видалення фільмів, новин, категорій та тегів тільки для адміністраторів.

